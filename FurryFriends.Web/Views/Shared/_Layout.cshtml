<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FurryFriends - Cửa Hàng Thú Cưng</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  @RenderSection("Styles", required: false)
  <style>
    body { font-family: 'Inter', sans-serif; }
    
    /* Smooth scrolling */
    html { scroll-behavior: smooth; }
    
    /* Gradient animations */
    @@keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .gradient-animated {
      background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #f5576c);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
    }
    
    /* Glassmorphism */
    .glass {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .glass-dark {
      background: rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    /* Floating animation */
    @@keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .float-animation {
      animation: float 3s ease-in-out infinite;
    }
    
    /* Pulse animation */
    @@keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); }
      50% { box-shadow: 0 0 30px rgba(99, 102, 241, 0.6); }
    }
    
    .pulse-glow {
      animation: pulse-glow 2s ease-in-out infinite;
    }
    
    /* Hover card effects */
    .hover-card {
      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    
    .hover-card:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }
    
    /* Text gradient */
    .text-gradient {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    /* Magnetic button effect */
    .magnetic-btn {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .magnetic-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }
    
    .magnetic-btn:hover::before {
      left: 100%;
    }
    
    /* Parallax sections */
    .parallax {
      will-change: transform;
    }
    
    /* Loading animation */
    @@keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    
    .shimmer {
      position: relative;
      overflow: hidden;
    }
    
    .shimmer::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transform: translateX(-100%);
      animation: shimmer 2s infinite;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #f1f1f1; }
    ::-webkit-scrollbar-thumb { 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 4px;
    }
    
    /* Entrance animations */
    @@keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .fade-in-up {
      animation: fadeInUp 0.8s ease-out forwards;
      opacity: 0;
    }
    
    .delay-1 { animation-delay: 0.1s; }
    .delay-2 { animation-delay: 0.2s; }
    .delay-3 { animation-delay: 0.3s; }
    .delay-4 { animation-delay: 0.4s; }
    .mobile-menu-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 40;
      transition: opacity 0.3s ease;
    }
    
    .mobile-menu-container {
      position: fixed;
      top: 0;
      right: 0;
      width: 280px;
      height: 100vh;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      z-index: 50;
    }
    
    .mobile-menu-container.open {
      transform: translateX(0);
    }
    
    .mobile-menu-backdrop.open {
      opacity: 1;
      pointer-events: all;
    }
    
    .mobile-menu-backdrop:not(.open) {
      opacity: 0;
      pointer-events: none;
    }
    
    /* Hamburger Animation */
    .hamburger {
      position: relative;
      width: 24px;
      height: 18px;
      cursor: pointer;
    }
    
    .hamburger span {
      display: block;
      position: absolute;
      height: 2px;
      width: 100%;
      background: #374151;
      border-radius: 1px;
      opacity: 1;
      left: 0;
      transform: rotate(0deg);
      transition: .25s ease-in-out;
    }
    
    .hamburger span:nth-child(1) {
      top: 0px;
    }
    
    .hamburger span:nth-child(2) {
      top: 8px;
    }
    
    .hamburger span:nth-child(3) {
      top: 16px;
    }
    
    .hamburger.open span:nth-child(1) {
      top: 8px;
      transform: rotate(135deg);
    }
    
    .hamburger.open span:nth-child(2) {
      opacity: 0;
      left: -60px;
    }
    
    .hamburger.open span:nth-child(3) {
      top: 8px;
      transform: rotate(-135deg);
    }
  </style>
</head>
<body class="bg-gray-50 pt-16 overflow-x-hidden">

  @inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
  @{
      var hoTen = HttpContextAccessor.HttpContext?.Session.GetString("HoTen");
      var taiKhoanId = HttpContextAccessor.HttpContext?.Session.GetString("TaiKhoanId");
      var role = HttpContextAccessor.HttpContext?.Session.GetString("Role") ?? "";
      
      // Kiểm tra nếu là admin: role chứa "admin"
      bool isAdmin = !string.IsNullOrEmpty(role) && role.ToLower().Contains("admin");
  }

  <header class="fixed top-0 left-0 w-full glass z-50 transition-all duration-300">
    <div class="container mx-auto px-4">
      <nav class="flex items-center justify-between h-16">
                <a asp-action="Index" asp-controller="Home" class="text-2xl font-bold flex items-center animate-slideInLeft hover:scale-105 transition-transform duration-300">
          <img src="/images/hihihi.png" alt="FurryFriends Logo" class="h-12 mr-2 animate-float">
          <span class="bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">FurryFriends</span>
        </a>

        <!-- Desktop Navigation -->
        <ul class="hidden md:flex space-x-8 items-center">
          <li><a href="index.html" class="text-gray-700 hover:text-transparent hover:bg-gradient-to-r hover:from-purple-600 hover:to-blue-600 hover:bg-clip-text transition-all duration-300 hover:scale-110 transform relative after:absolute after:bottom-[-4px] after:left-0 after:w-0 after:h-0.5 after:bg-gradient-to-r after:from-purple-600 after:to-blue-600 hover:after:w-full after:transition-all after:duration-300">Trang Chủ</a></li>
          <li><a href="products-new.html" class="text-gray-700 hover:text-transparent hover:bg-gradient-to-r hover:from-purple-600 hover:to-blue-600 hover:bg-clip-text transition-all duration-300 hover:scale-110 transform relative after:absolute after:bottom-[-4px] after:left-0 after:w-0 after:h-0.5 after:bg-gradient-to-r after:from-purple-600 after:to-blue-600 hover:after:w-full after:transition-all after:duration-300">Danh Mục</a></li>
          <li><a href="products.html" class="text-gray-700 hover:text-transparent hover:bg-gradient-to-r hover:from-purple-600 hover:to-blue-600 hover:bg-clip-text transition-all duration-300 hover:scale-110 transform relative after:absolute after:bottom-[-4px] after:left-0 after:w-0 after:h-0.5 after:bg-gradient-to-r after:from-purple-600 after:to-blue-600 hover:after:w-full after:transition-all after:duration-300">Sản Phẩm</a></li>
          <li><a href="about.html" class="text-gray-700 hover:text-transparent hover:bg-gradient-to-r hover:from-purple-600 hover:to-blue-600 hover:bg-clip-text transition-all duration-300 hover:scale-110 transform relative after:absolute after:bottom-[-4px] after:left-0 after:w-0 after:h-0.5 after:bg-gradient-to-r after:from-purple-600 after:to-blue-600 hover:after:w-full after:transition-all after:duration-300">Giới Thiệu</a></li>
          <li><a href="contact.html" class="text-gray-700 hover:text-transparent hover:bg-gradient-to-r hover:from-purple-600 hover:to-blue-600 hover:bg-clip-text transition-all duration-300 hover:scale-110 transform relative after:absolute after:bottom-[-4px] after:left-0 after:w-0 after:h-0.5 after:bg-gradient-to-r after:from-purple-600 after:to-blue-600 hover:after:w-full after:transition-all after:duration-300">Liên Hệ</a></li>
        </ul>

        <!-- Action Buttons -->
        <div class="hidden md:flex items-center space-x-4 animate-slideInRight">
            @if (!string.IsNullOrEmpty(taiKhoanId))
            {
                @if (isAdmin)
                {
                    <a href="/Admin/Dashboard" class="px-4 py-2 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full hover:from-blue-600 hover:to-green-600 transition-all duration-300 hover:scale-105 hover:shadow-lg mr-2">
                        <i class="fas fa-crown mr-1"></i> Quản trị
                    </a>
                }
                <div class="relative">
                    <button id="account-btn" class="px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full hover:from-purple-600 hover:to-blue-600 transition-all duration-300 hover:scale-105 hover:shadow-lg hover-glow flex items-center">
                        <i class="fas fa-user-circle mr-2"></i> @hoTen
                        <i class="fas fa-caret-down ml-2"></i>
                    </button>
                    <div id="account-dropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-50 hidden account-dropdown">
                        <a href="/ThongTinCaNhan" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 flex items-center gap-2">
                            <i class="fas fa-id-card"></i> Thông tin tài khoản
                        </a>
                        <form asp-action="Logout" asp-controller="KhachHangLogin" method="get" style="margin:0;">
                            <button type="submit" class="w-full text-left px-4 py-2 hover:bg-gray-100 flex items-center gap-2">
                                <i class="fas fa-sign-out-alt"></i> Đăng xuất
                            </button>
                        </form>
                    </div>
                </div>
            }
            else
            {
                <a href="/KhachHangLogin/DangNhap" class="px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full hover:from-purple-600 hover:to-blue-600 transition-all duration-300 hover:scale-105 hover:shadow-lg hover-glow">
                    Đăng Nhập
                </a>
            }
            <a href="@Url.Action("Index", "GioHangs")" class="relative px-6 py-2 bg-gradient-to-r from-gray-800 to-black text-white rounded-full hover:from-black hover:to-gray-800 transition-all duration-300 hover:scale-105 hover:shadow-lg cart-badge">
                Giỏ Hàng
                <span class="absolute -top-2 -right-2 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs rounded-full px-2 py-1 animate-pulse-custom">0</span>
            </a>
        </div>

        <!-- Mobile Menu Button -->
        <button class="md:hidden p-2 z-50 relative" id="mobile-menu-button">
          <div class="hamburger" id="hamburger">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </button>
      </nav>
    </div>
  </header>

  <!-- Mobile Menu Backdrop -->
  <div class="mobile-menu-backdrop" id="mobile-menu-backdrop"></div>

  <!-- Mobile Menu -->
  <div class="mobile-menu-container glass-dark" id="mobile-menu">
    <div class="h-full flex flex-col">
      <div class="p-4 border-b border-white/20">
        <input type="text" placeholder="Tìm kiếm" class="search-input w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-white placeholder-white/70" />
      </div>
      <nav class="flex-1 px-4 py-6 space-y-4 overflow-y-auto">
        <a href="index.html" class="block py-3 text-lg text-white/80 hover:text-white transition-all duration-300 hover:translate-x-2">Trang Chủ</a>
        <a href="products-new.html" class="block py-3 text-lg text-white/80 hover:text-white transition-all duration-300 hover:translate-x-2">Danh Mục</a>
        <a href="products.html" class="block py-3 text-lg text-white/80 hover:text-white transition-all duration-300 hover:translate-x-2">Sản Phẩm</a>
        <a href="about.html" class="block py-3 text-lg text-white/80 hover:text-white transition-all duration-300 hover:translate-x-2">Giới Thiệu</a>
        <a href="contact.html" class="block py-3 text-lg text-white/80 hover:text-white transition-all duration-300 hover:translate-x-2">Liên Hệ</a>
      </nav>
      <div class="p-4 border-t border-white/20">
        @if (!string.IsNullOrEmpty(taiKhoanId))
        {
            if (isAdmin)
            {
                <a href="/Admin/Dashboard" class="w-full py-3 mb-2 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg hover:from-blue-600 hover:to-green-600 transition-all duration-300 hover:scale-105 block text-center">
                    <i class="fas fa-crown mr-1"></i> Quản trị
                </a>
            }
            <form asp-action="Logout" asp-controller="KhachHangLogin" method="get" style="margin:0;">
                <button type="submit" class="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-blue-600 transition-all duration-300 hover:scale-105">Đăng xuất (@hoTen)</button>
            </form>
        }
        else
        {
            <a href="/KhachHangLogin/DangNhap" class="w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-blue-600 transition-all duration-300 hover:scale-105 block text-center">Đăng Nhập</a>
        }
      </div>
      <div class="p-4 border-t border-white/20">
        <a href="@Url.Action("Index", "GioHangs")" class="w-full py-3 bg-gradient-to-r from-gray-800 to-black text-white rounded-lg hover:from-black hover:to-gray-800 transition-all duration-300 hover:scale-105 cart-badge relative block">
          Giỏ Hàng
          <span class="absolute -top-2 -right-2 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs rounded-full px-2">0</span>
        </a>
      </div>
    </div>
  </div>

   @RenderBody()
  <!-- Footer -->
  

  <!-- Custom JavaScript -->
  <script>
    // Mobile menu toggle
    // Elements
const mobileMenuButton = document.getElementById('mobile-menu-button');
const mobileMenu = document.getElementById('mobile-menu');
const mobileMenuBackdrop = document.getElementById('mobile-menu-backdrop');
const hamburger = document.getElementById('hamburger');
const header = document.getElementById('header') || document.querySelector('header');
const openLoginBtn = document.getElementById('open-login');
const openCartBtn = document.getElementById('open-cart');
const openLoginBtnmb = document.getElementById('open-login-mobile');
const openCartBtnmb = document.getElementById('open-cart-mobile');
// Cart State
let cartItems = [];
let cartCount = 0;
openLoginBtnmb?.addEventListener('click', () => {
        window.location.href = 'auth.html';  // chuyển sang trang auth.html
      });
      
      // openCartBtnmb?.addEventListener('click', () => {
      //   window.location.href = 'cart.html';  // chuyển sang trang cart.html
      // });
// Mobile Menu Functions
function toggleMobileMenu() {
    if (!mobileMenuButton || !mobileMenu || !mobileMenuBackdrop) return;

    const isOpen = mobileMenu.classList.contains('open');
    
    if (!isOpen) {
        mobileMenu.classList.add('open');
        mobileMenuBackdrop.classList.add('open');
        hamburger?.classList.add('open');
        document.body.style.overflow = 'hidden';
    } else {
        closeMobileMenu();
    }
}

function closeMobileMenu() {
    mobileMenu?.classList.remove('open');
    mobileMenuBackdrop?.classList.remove('open');
    hamburger?.classList.remove('open');
    document.body.style.overflow = '';
}

function initializeMobileMenu() {
    if (!mobileMenuButton || !mobileMenu) return;

    mobileMenuButton.addEventListener('click', (e) => {
        e.stopPropagation();
        toggleMobileMenu();
    });

    mobileMenuBackdrop?.addEventListener('click', closeMobileMenu);

    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeMobileMenu();
    });

    const mobileMenuLinks = mobileMenu.querySelectorAll('a');
    mobileMenuLinks.forEach(link => {
        link.addEventListener('click', closeMobileMenu);
    });
}

// Helper Functions
function updateCartBadge() {
    const cartBadges = document.querySelectorAll('.cart-badge span');
    cartBadges.forEach(badge => {
        badge.textContent = cartCount.toString();
    });
}

function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `fixed top-20 right-4 px-6 py-3 rounded-lg text-white z-50 transform translate-x-full transition-transform duration-300 ${
        type === 'success' ? 'bg-green-500' : 'bg-blue-500'
    }`;
    notification.textContent = message;
    document.body.appendChild(notification);
    setTimeout(() => notification.classList.remove('translate-x-full'), 100);
    setTimeout(() => {
        notification.classList.add('translate-x-full');
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    initializeMobileMenu();
    updateCartBadge();

    // Scroll effect for header
    window.addEventListener('scroll', () => {
        if (window.scrollY > 100) {
            header?.classList.add('bg-white', 'bg-opacity-95');
            header?.classList.remove('glass');
        } else {
            header?.classList.remove('bg-white', 'bg-opacity-95');
            header?.classList.add('glass');
        }
    });



    // Switch between login and signup
    const openSignupBtn = document.getElementById('open-signup');
    if (openSignupBtn) {
        openSignupBtn.addEventListener('click', () => {
            const loginModal = document.getElementById('login-modal');
            const signupModal = document.getElementById('signup-modal');
            if (loginModal && signupModal) {
                loginModal.classList.add('opacity-0', 'pointer-events-none');
                signupModal.classList.remove('opacity-0', 'pointer-events-none');
                signupModal.classList.add('opacity-100');
            }
        });
    }
    openLoginBtn?.addEventListener('click', () => {
        window.location.href = 'auth.html';  // chuyển sang trang auth.html
      });
      
      // openCartBtn?.addEventListener('click', () => {
      //   window.location.href = 'cart.html';  // chuyển sang trang cart.html
      // });

    // Smooth scroll
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    });

    // Intersection Observer animation
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('fade-in-up');
            }
        });
    }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    });

    document.querySelectorAll('.hover-card, .fade-in-up').forEach(el => observer.observe(el));

    // Add to cart button logic
    const cartBadges = document.querySelectorAll('.cart-badge span');
    document.querySelectorAll('.btn-primary, .magnetic-btn').forEach(btn => {
        if (btn.textContent.includes('Thêm Vào Giỏ')) {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                cartCount++;
                cartBadges.forEach(badge => {
                    badge.textContent = cartCount;
                    badge.classList.add('animate-pulse');
                    setTimeout(() => badge.classList.remove('animate-pulse'), 1000);
                });
                showNotification('Đã thêm sản phẩm vào giỏ hàng!', 'success');
            });
        }
    });

    // Parallax scroll effect
    window.addEventListener('scroll', () => {
        const scrolled = window.pageYOffset;
        const parallaxElements = document.querySelectorAll('.parallax');
        parallaxElements.forEach(element => {
            const speed = element.dataset.speed || 0.5;
            element.style.transform = `translateY(${scrolled * speed}px)`;
        });
    });
});
        @RenderSection("Scripts", required: false)

  </script>
  <script>
    // Dropdown account menu click
    document.addEventListener('DOMContentLoaded', function () {
        const accountBtn = document.getElementById('account-btn');
        const accountDropdown = document.getElementById('account-dropdown');

        if (accountBtn && accountDropdown) {
            accountBtn.addEventListener('click', function (e) {
                e.stopPropagation();
                accountDropdown.classList.toggle('hidden');
            });

            // Ẩn dropdown khi click ra ngoài
            document.addEventListener('click', function (e) {
                if (!accountDropdown.classList.contains('hidden')) {
                    if (!accountDropdown.contains(e.target) && !accountBtn.contains(e.target)) {
                        accountDropdown.classList.add('hidden');
                    }
                }
            });
        }
    });
  </script>
</body>
</html>