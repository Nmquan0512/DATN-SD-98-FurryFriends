@model FurryFriends.Web.ViewModels.ThanhToanResultViewModel
@{
    Layout = null; // nếu view này độc lập, không dùng _Layout.cshtml
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <title>Kết quả thanh toán</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
</head>
<body>
    <div class="container py-4">
        <div class="alert alert-success text-center shadow-sm">
            <h2 class="mb-0">
                <i class="bi bi-check-circle-fill"></i> Thanh toán thành công
            </h2>
        </div>

        <!-- Thông tin hóa đơn -->
        <div class="card mb-4 shadow-sm">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="bi bi-receipt"></i> Thông tin hóa đơn</h5>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"><strong>Mã hóa đơn:</strong> @Model.HoaDonId</li>
                    <li class="list-group-item"><strong>Tên khách hàng:</strong> @Model.TenCuaKhachHang</li>
                    <li class="list-group-item"><strong>SĐT:</strong> @Model.SdtCuaKhachHang</li>
                    <li class="list-group-item"><strong>Email:</strong> @Model.EmailCuaKhachHang</li>
                    <li class="list-group-item"><strong>Địa chỉ giao hàng:</strong> @Model.DiaChiCuaKhachHang</li>
                    <li class="list-group-item"><strong>Ngày tạo:</strong> @Model.NgayTao.ToString("dd/MM/yyyy HH:mm")</li>
                    <li class="list-group-item">
                        <strong>Hình thức thanh toán:</strong>
                        <span class="badge bg-info">@Model.HinhThucThanhToan</span>
                    </li>
                    <li class="list-group-item"><strong>Ghi chú:</strong> @Model.GhiChu</li>
                    @if (Model.TongTien != Model.TongTienSauKhiGiam)
                    {
                        <li class="list-group-item">
                            <strong>Tổng tiền gốc:</strong>
                            <span class="text-decoration-line-through text-muted">
                                @(Model.TongTien > 0 ? string.Format("{0:N0} ₫", Model.TongTien) : "0 ₫")
                            </span>
                        </li>
                        <li class="list-group-item">
                            <strong>Tổng tiền sau giảm:</strong>
                            <span class="text-danger fw-bold">
                                @(Model.TongTienSauKhiGiam > 0 ? string.Format("{0:N0} ₫", Model.TongTienSauKhiGiam) : "0 ₫")
                            </span>
                        </li>
                    }
                    else
                    {
                        <li class="list-group-item">
                            <strong>Tổng tiền:</strong>
                            <span class="text-danger fw-bold">
                                @(Model.TongTienSauKhiGiam > 0 ? string.Format("{0:N0} ₫", Model.TongTienSauKhiGiam) : "0 ₫")
                            </span>
                        </li>
                    }
                </ul>
            </div>
        </div>

        <!-- Chi tiết sản phẩm -->
        <div class="card shadow-sm mb-5">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0"><i class="bi bi-box-seam"></i> Chi tiết sản phẩm</h5>
            </div>
            <div class="card-body">
                @if (Model.ChiTietSanPham != null && Model.ChiTietSanPham.Any())
                {
                    <div class="table-responsive">
                        <table class="table table-bordered table-striped align-middle text-center">
                            <thead class="table-dark">
                                <tr>
                                    <th>Ảnh</th>
                                    <th>Tên sản phẩm</th>
                                    <th>Mô tả</th>
                                    <th>Thương hiệu</th>
                                    <th>Kích cỡ</th>
                                    <th>Màu sắc</th>
                                    <th>Chất liệu</th>
                                    <th>Thành phần</th>
                                    <th>Số lượng</th>
                                    <th>Giá</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var sp in Model.ChiTietSanPham)
                                {
                                    <tr>
                                        <td>
                                            <img src="@sp.AnhSanPhamLucMua" alt="Ảnh sản phẩm" class="img-thumbnail" style="width: 80px; height: auto;" />
                                        </td>
                                        <td>@sp.TenSanPhamLucMua</td>
                                        <td>@sp.MoTaSanPhamLucMua</td>
                                        <td>@sp.ThuongHieuLucMua</td>
                                        <td>@sp.KichCoLucMua</td>
                                        <td>@sp.MauSacLucMua</td>
                                        <td>@sp.ChatLieuLucMua</td>
                                        <td>@sp.ThanhPhanLucMua</td>
                                        <td>@sp.SoLuong</td>
                                        <td class="text-danger fw-semibold">@string.Format("{0:N0} ₫", sp.GiaLucMua)</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                }
                else
                {
                    <div class="alert alert-warning">Không có sản phẩm nào trong hóa đơn.</div>
                }
            </div>
        </div>

        <!-- Nút điều hướng -->
        <div class="text-center">
            <a href="/" class="btn btn-outline-primary">
                <i class="bi bi-arrow-left-circle"></i> Quay về trang chủ
            </a>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
